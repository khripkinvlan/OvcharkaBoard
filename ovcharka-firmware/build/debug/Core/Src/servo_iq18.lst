ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"servo_iq18.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/servo_iq18.c"
  18              		.global	__aeabi_fmul
  19              		.global	__aeabi_f2iz
  20              		.global	__aeabi_fdiv
  21              		.section	.text.servo_iq18_base_init,"ax",%progbits
  22              		.align	1
  23              		.global	servo_iq18_base_init
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	servo_iq18_base_init:
  29              	.LVL0:
  30              	.LFB65:
   1:Core/Src/servo_iq18.c **** /*
   2:Core/Src/servo_iq18.c ****  * servo_iq18.c
   3:Core/Src/servo_iq18.c ****  *
   4:Core/Src/servo_iq18.c ****  *  Created on: Dec 18, 2023
   5:Core/Src/servo_iq18.c ****  *      Author: zhmis
   6:Core/Src/servo_iq18.c ****  */
   7:Core/Src/servo_iq18.c **** #include "servo_iq18.h"
   8:Core/Src/servo_iq18.c **** 
   9:Core/Src/servo_iq18.c **** void servo_iq18_base_init(servo_iq18_t *servo, enum loops servoLoops,
  10:Core/Src/servo_iq18.c **** 		float motorSpeed, float gearRatio, uint8_t reverse) {
  31              		.loc 1 10 55 view -0
  32              		.cfi_startproc
  33              		@ args = 4, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 10 55 is_stmt 0 view .LVU1
  36 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  37              		.cfi_def_cfa_offset 24
  38              		.cfi_offset 4, -24
  39              		.cfi_offset 5, -20
  40              		.cfi_offset 6, -16
  41              		.cfi_offset 7, -12
  42              		.cfi_offset 8, -8
  43              		.cfi_offset 14, -4
  44 0004 0446     		mov	r4, r0
  45 0006 0D46     		mov	r5, r1
  46 0008 1746     		mov	r7, r2
  47 000a 1E46     		mov	r6, r3
  48 000c 9DF81880 		ldrb	r8, [sp, #24]	@ zero_extendqisi2
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 2


  11:Core/Src/servo_iq18.c **** 	servo->controllerLoops = servoLoops;
  49              		.loc 1 11 2 is_stmt 1 view .LVU2
  50              		.loc 1 11 25 is_stmt 0 view .LVU3
  51 0010 80F81411 		strb	r1, [r0, #276]
  12:Core/Src/servo_iq18.c **** 	servo->encoder.gearRatio = _IQ18(gearRatio);
  52              		.loc 1 12 2 is_stmt 1 view .LVU4
  53              		.loc 1 12 29 is_stmt 0 view .LVU5
  54 0014 4FF09141 		mov	r1, #1216348160
  55              	.LVL1:
  56              		.loc 1 12 29 view .LVU6
  57 0018 1846     		mov	r0, r3
  58              	.LVL2:
  59              		.loc 1 12 29 view .LVU7
  60 001a FFF7FEFF 		bl	__aeabi_fmul
  61              	.LVL3:
  62              		.loc 1 12 29 view .LVU8
  63 001e FFF7FEFF 		bl	__aeabi_f2iz
  64              	.LVL4:
  65              		.loc 1 12 27 view .LVU9
  66 0022 2062     		str	r0, [r4, #32]
  13:Core/Src/servo_iq18.c **** 	if (reverse) {
  67              		.loc 1 13 2 is_stmt 1 view .LVU10
  68              		.loc 1 13 5 is_stmt 0 view .LVU11
  69 0024 B8F1000F 		cmp	r8, #0
  70 0028 14D0     		beq	.L2
  14:Core/Src/servo_iq18.c **** 		servo->reverseFlag = -1;
  71              		.loc 1 14 3 is_stmt 1 view .LVU12
  72              		.loc 1 14 22 is_stmt 0 view .LVU13
  73 002a FF23     		movs	r3, #255
  74 002c 84F81031 		strb	r3, [r4, #272]
  75              	.L3:
  15:Core/Src/servo_iq18.c **** 	} else {
  16:Core/Src/servo_iq18.c **** 		servo->reverseFlag = 1;
  17:Core/Src/servo_iq18.c **** 	}
  18:Core/Src/servo_iq18.c **** 	servo->maxShaftSpeed = _IQ18(motorSpeed / gearRatio);
  76              		.loc 1 18 2 is_stmt 1 view .LVU14
  77              		.loc 1 18 25 is_stmt 0 view .LVU15
  78 0030 3146     		mov	r1, r6
  79 0032 3846     		mov	r0, r7
  80 0034 FFF7FEFF 		bl	__aeabi_fdiv
  81              	.LVL5:
  82 0038 4FF09141 		mov	r1, #1216348160
  83 003c FFF7FEFF 		bl	__aeabi_fmul
  84              	.LVL6:
  85 0040 FFF7FEFF 		bl	__aeabi_f2iz
  86              	.LVL7:
  87              		.loc 1 18 23 view .LVU16
  88 0044 C4F80801 		str	r0, [r4, #264]
  19:Core/Src/servo_iq18.c **** 
  20:Core/Src/servo_iq18.c **** 	if (servoLoops != Single) {
  89              		.loc 1 20 2 is_stmt 1 view .LVU17
  90              		.loc 1 20 5 is_stmt 0 view .LVU18
  91 0048 15B1     		cbz	r5, .L1
  21:Core/Src/servo_iq18.c **** 		servo->pid_position.lowerLimit = -servo->maxShaftSpeed;
  92              		.loc 1 21 3 is_stmt 1 view .LVU19
  93              		.loc 1 21 36 is_stmt 0 view .LVU20
  94 004a 4342     		rsbs	r3, r0, #0
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 3


  95              		.loc 1 21 34 view .LVU21
  96 004c E365     		str	r3, [r4, #92]
  22:Core/Src/servo_iq18.c **** 		servo->pid_position.upperLimit = servo->maxShaftSpeed;
  97              		.loc 1 22 3 is_stmt 1 view .LVU22
  98              		.loc 1 22 34 is_stmt 0 view .LVU23
  99 004e A065     		str	r0, [r4, #88]
 100              	.L1:
  23:Core/Src/servo_iq18.c **** 	}
  24:Core/Src/servo_iq18.c **** }
 101              		.loc 1 24 1 view .LVU24
 102 0050 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 103              	.LVL8:
 104              	.L2:
  16:Core/Src/servo_iq18.c **** 	}
 105              		.loc 1 16 3 is_stmt 1 view .LVU25
  16:Core/Src/servo_iq18.c **** 	}
 106              		.loc 1 16 22 is_stmt 0 view .LVU26
 107 0054 0123     		movs	r3, #1
 108 0056 84F81031 		strb	r3, [r4, #272]
 109 005a E9E7     		b	.L3
 110              		.cfi_endproc
 111              	.LFE65:
 113              		.section	.text.servo_iq18_encoder_init,"ax",%progbits
 114              		.align	1
 115              		.global	servo_iq18_encoder_init
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	servo_iq18_encoder_init:
 121              	.LVL9:
 122              	.LFB66:
  25:Core/Src/servo_iq18.c **** 
  26:Core/Src/servo_iq18.c **** void servo_iq18_encoder_init(servo_iq18_t *servo, TIM_HandleTypeDef *htim,
  27:Core/Src/servo_iq18.c **** 		uint16_t CPR, uint8_t encoder_is_reversed) {
 123              		.loc 1 27 46 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		.loc 1 27 46 is_stmt 0 view .LVU28
 128 0000 38B5     		push	{r3, r4, r5, lr}
 129              		.cfi_def_cfa_offset 16
 130              		.cfi_offset 3, -16
 131              		.cfi_offset 4, -12
 132              		.cfi_offset 5, -8
 133              		.cfi_offset 14, -4
 134 0002 0446     		mov	r4, r0
 135 0004 1D46     		mov	r5, r3
  28:Core/Src/servo_iq18.c **** 	servo->encoder.htim = htim;
 136              		.loc 1 28 2 is_stmt 1 view .LVU29
 137              		.loc 1 28 22 is_stmt 0 view .LVU30
 138 0006 0160     		str	r1, [r0]
  29:Core/Src/servo_iq18.c **** 	servo->encoder.countsPerRevolution = CPR;
 139              		.loc 1 29 2 is_stmt 1 view .LVU31
 140              		.loc 1 29 37 is_stmt 0 view .LVU32
 141 0008 4285     		strh	r2, [r0, #42]	@ movhi
  30:Core/Src/servo_iq18.c **** 	initEMA_iq18(&servo->encoder.filter, VEL_EMA, 0);
 142              		.loc 1 30 2 is_stmt 1 view .LVU33
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 4


 143 000a 0022     		movs	r2, #0
 144              	.LVL10:
 145              		.loc 1 30 2 is_stmt 0 view .LVU34
 146 000c 0649     		ldr	r1, .L10
 147              	.LVL11:
 148              		.loc 1 30 2 view .LVU35
 149 000e 0430     		adds	r0, r0, #4
 150              	.LVL12:
 151              		.loc 1 30 2 view .LVU36
 152 0010 FFF7FEFF 		bl	initEMA_iq18
 153              	.LVL13:
  31:Core/Src/servo_iq18.c **** 	if(!encoder_is_reversed){
 154              		.loc 1 31 2 is_stmt 1 view .LVU37
 155              		.loc 1 31 4 is_stmt 0 view .LVU38
 156 0014 1DB9     		cbnz	r5, .L7
  32:Core/Src/servo_iq18.c **** 		servo->encoder.reverse_flag = 1;
 157              		.loc 1 32 3 is_stmt 1 view .LVU39
 158              		.loc 1 32 31 is_stmt 0 view .LVU40
 159 0016 0123     		movs	r3, #1
 160 0018 84F82C30 		strb	r3, [r4, #44]
 161              	.L6:
  33:Core/Src/servo_iq18.c **** 	}else{
  34:Core/Src/servo_iq18.c **** 		servo->encoder.reverse_flag = -1;
  35:Core/Src/servo_iq18.c **** 	}
  36:Core/Src/servo_iq18.c **** }
 162              		.loc 1 36 1 view .LVU41
 163 001c 38BD     		pop	{r3, r4, r5, pc}
 164              	.LVL14:
 165              	.L7:
  34:Core/Src/servo_iq18.c **** 	}
 166              		.loc 1 34 3 is_stmt 1 view .LVU42
  34:Core/Src/servo_iq18.c **** 	}
 167              		.loc 1 34 31 is_stmt 0 view .LVU43
 168 001e FF23     		movs	r3, #255
 169 0020 84F82C30 		strb	r3, [r4, #44]
 170              		.loc 1 36 1 view .LVU44
 171 0024 FAE7     		b	.L6
 172              	.L11:
 173 0026 00BF     		.align	2
 174              	.L10:
 175 0028 CDCCCC3E 		.word	1053609165
 176              		.cfi_endproc
 177              	.LFE66:
 179              		.section	.text.servo_iq18_driver_init,"ax",%progbits
 180              		.align	1
 181              		.global	servo_iq18_driver_init
 182              		.syntax unified
 183              		.thumb
 184              		.thumb_func
 186              	servo_iq18_driver_init:
 187              	.LVL15:
 188              	.LFB67:
  37:Core/Src/servo_iq18.c **** 
  38:Core/Src/servo_iq18.c **** void servo_iq18_driver_init(servo_iq18_t *servo, TIM_HandleTypeDef *htim,
  39:Core/Src/servo_iq18.c **** 		uint8_t timerChannel, GPIO_TypeDef *dir1_Port, uint32_t dir1_Pin, uint16_t minDuty,
  40:Core/Src/servo_iq18.c **** 		uint16_t maxDuty) {
 189              		.loc 1 40 21 is_stmt 1 view -0
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 5


 190              		.cfi_startproc
 191              		@ args = 12, pretend = 0, frame = 0
 192              		@ frame_needed = 0, uses_anonymous_args = 0
 193              		@ link register save eliminated.
  41:Core/Src/servo_iq18.c **** 	servo->driver.htim = htim;
 194              		.loc 1 41 2 view .LVU46
 195              		.loc 1 41 21 is_stmt 0 view .LVU47
 196 0000 C0F8E410 		str	r1, [r0, #228]
  42:Core/Src/servo_iq18.c **** 	servo->driver.timerChannel = timerChannel;
 197              		.loc 1 42 2 is_stmt 1 view .LVU48
 198              		.loc 1 42 29 is_stmt 0 view .LVU49
 199 0004 80F8F920 		strb	r2, [r0, #249]
  43:Core/Src/servo_iq18.c **** 	servo->driver.dir1_Port = dir1_Port;
 200              		.loc 1 43 2 is_stmt 1 view .LVU50
 201              		.loc 1 43 26 is_stmt 0 view .LVU51
 202 0008 C0F8E830 		str	r3, [r0, #232]
  44:Core/Src/servo_iq18.c **** 	servo->driver.dir1_Pin = dir1_Pin;
 203              		.loc 1 44 2 is_stmt 1 view .LVU52
 204              		.loc 1 44 25 is_stmt 0 view .LVU53
 205 000c 009B     		ldr	r3, [sp]
 206              	.LVL16:
 207              		.loc 1 44 25 view .LVU54
 208 000e C0F8F030 		str	r3, [r0, #240]
  45:Core/Src/servo_iq18.c **** 
  46:Core/Src/servo_iq18.c **** 	servo->driver.minDuty = minDuty;
 209              		.loc 1 46 2 is_stmt 1 view .LVU55
 210              		.loc 1 46 24 is_stmt 0 view .LVU56
 211 0012 BDF80430 		ldrh	r3, [sp, #4]
 212 0016 A0F8F630 		strh	r3, [r0, #246]	@ movhi
  47:Core/Src/servo_iq18.c **** 	servo->driver.maxDuty = maxDuty;
 213              		.loc 1 47 2 is_stmt 1 view .LVU57
 214              		.loc 1 47 24 is_stmt 0 view .LVU58
 215 001a BDF80830 		ldrh	r3, [sp, #8]
 216 001e A0F8F430 		strh	r3, [r0, #244]	@ movhi
  48:Core/Src/servo_iq18.c **** 
  49:Core/Src/servo_iq18.c **** 	switch (servo->controllerLoops) {
 217              		.loc 1 49 2 is_stmt 1 view .LVU59
 218              		.loc 1 49 15 is_stmt 0 view .LVU60
 219 0022 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 220              		.loc 1 49 2 view .LVU61
 221 0026 012B     		cmp	r3, #1
 222 0028 09D0     		beq	.L13
 223 002a 022B     		cmp	r3, #2
 224 002c 0FD0     		beq	.L14
 225 002e ABB9     		cbnz	r3, .L12
  50:Core/Src/servo_iq18.c **** 	case Single:
  51:Core/Src/servo_iq18.c **** 		servo->pid_position.lowerLimit = _IQ18(-1);
 226              		.loc 1 51 3 is_stmt 1 view .LVU62
 227              		.loc 1 51 34 is_stmt 0 view .LVU63
 228 0030 A3F58023 		sub	r3, r3, #262144
 229 0034 C365     		str	r3, [r0, #92]
  52:Core/Src/servo_iq18.c **** 		servo->pid_position.upperLimit = _IQ18(1);
 230              		.loc 1 52 3 is_stmt 1 view .LVU64
 231              		.loc 1 52 34 is_stmt 0 view .LVU65
 232 0036 4FF48023 		mov	r3, #262144
 233 003a 8365     		str	r3, [r0, #88]
  53:Core/Src/servo_iq18.c **** 		break;
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 6


 234              		.loc 1 53 3 is_stmt 1 view .LVU66
 235 003c 7047     		bx	lr
 236              	.L13:
  54:Core/Src/servo_iq18.c **** 	case Double:
  55:Core/Src/servo_iq18.c **** 		servo->pid_velocity.lowerLimit = _IQ18(-1);
 237              		.loc 1 55 3 view .LVU67
 238              		.loc 1 55 34 is_stmt 0 view .LVU68
 239 003e 084B     		ldr	r3, .L16
 240 0040 C0F89830 		str	r3, [r0, #152]
  56:Core/Src/servo_iq18.c **** 		servo->pid_velocity.upperLimit = _IQ18(1);
 241              		.loc 1 56 3 is_stmt 1 view .LVU69
 242              		.loc 1 56 34 is_stmt 0 view .LVU70
 243 0044 4FF48023 		mov	r3, #262144
 244 0048 C0F89430 		str	r3, [r0, #148]
  57:Core/Src/servo_iq18.c **** 		break;
 245              		.loc 1 57 3 is_stmt 1 view .LVU71
 246 004c 7047     		bx	lr
 247              	.L14:
  58:Core/Src/servo_iq18.c **** 	case Triple:
  59:Core/Src/servo_iq18.c **** 		servo->pid_current.lowerLimit = _IQ18(-1);
 248              		.loc 1 59 3 view .LVU72
 249              		.loc 1 59 33 is_stmt 0 view .LVU73
 250 004e 044B     		ldr	r3, .L16
 251 0050 C0F8D430 		str	r3, [r0, #212]
  60:Core/Src/servo_iq18.c **** 		servo->pid_current.upperLimit = _IQ18(1);
 252              		.loc 1 60 3 is_stmt 1 view .LVU74
 253              		.loc 1 60 33 is_stmt 0 view .LVU75
 254 0054 4FF48023 		mov	r3, #262144
 255 0058 C0F8D030 		str	r3, [r0, #208]
  61:Core/Src/servo_iq18.c **** 		break;
 256              		.loc 1 61 3 is_stmt 1 view .LVU76
 257              	.L12:
  62:Core/Src/servo_iq18.c **** 	default:
  63:Core/Src/servo_iq18.c **** 		break;
  64:Core/Src/servo_iq18.c **** 	}
  65:Core/Src/servo_iq18.c **** }
 258              		.loc 1 65 1 is_stmt 0 view .LVU77
 259 005c 7047     		bx	lr
 260              	.L17:
 261 005e 00BF     		.align	2
 262              	.L16:
 263 0060 0000FCFF 		.word	-262144
 264              		.cfi_endproc
 265              	.LFE67:
 267              		.section	.text.servo_iq18_position_init,"ax",%progbits
 268              		.align	1
 269              		.global	servo_iq18_position_init
 270              		.syntax unified
 271              		.thumb
 272              		.thumb_func
 274              	servo_iq18_position_init:
 275              	.LVL17:
 276              	.LFB68:
  66:Core/Src/servo_iq18.c **** 
  67:Core/Src/servo_iq18.c **** void servo_iq18_position_init(servo_iq18_t *servo, float kp, float ki, float kd,
  68:Core/Src/servo_iq18.c **** 		float dt, float kb) {
 277              		.loc 1 68 23 is_stmt 1 view -0
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 7


 278              		.cfi_startproc
 279              		@ args = 8, pretend = 0, frame = 0
 280              		@ frame_needed = 0, uses_anonymous_args = 0
 281              		.loc 1 68 23 is_stmt 0 view .LVU79
 282 0000 70B5     		push	{r4, r5, r6, lr}
 283              		.cfi_def_cfa_offset 16
 284              		.cfi_offset 4, -16
 285              		.cfi_offset 5, -12
 286              		.cfi_offset 6, -8
 287              		.cfi_offset 14, -4
 288 0002 0446     		mov	r4, r0
 289 0004 0846     		mov	r0, r1
 290              	.LVL18:
 291              		.loc 1 68 23 view .LVU80
 292 0006 1646     		mov	r6, r2
 293 0008 1D46     		mov	r5, r3
  69:Core/Src/servo_iq18.c **** 	servo->pid_position.kp = _IQ18(kp);
 294              		.loc 1 69 2 is_stmt 1 view .LVU81
 295              		.loc 1 69 27 is_stmt 0 view .LVU82
 296 000a 4FF09141 		mov	r1, #1216348160
 297              	.LVL19:
 298              		.loc 1 69 27 view .LVU83
 299 000e FFF7FEFF 		bl	__aeabi_fmul
 300              	.LVL20:
 301              		.loc 1 69 27 view .LVU84
 302 0012 FFF7FEFF 		bl	__aeabi_f2iz
 303              	.LVL21:
 304              		.loc 1 69 25 view .LVU85
 305 0016 6063     		str	r0, [r4, #52]
  70:Core/Src/servo_iq18.c **** 	servo->pid_position.ki = _IQ18(ki);
 306              		.loc 1 70 2 is_stmt 1 view .LVU86
 307              		.loc 1 70 27 is_stmt 0 view .LVU87
 308 0018 4FF09141 		mov	r1, #1216348160
 309 001c 3046     		mov	r0, r6
 310 001e FFF7FEFF 		bl	__aeabi_fmul
 311              	.LVL22:
 312 0022 FFF7FEFF 		bl	__aeabi_f2iz
 313              	.LVL23:
 314              		.loc 1 70 25 view .LVU88
 315 0026 A063     		str	r0, [r4, #56]
  71:Core/Src/servo_iq18.c **** 	servo->pid_position.kd = _IQ18(kd);
 316              		.loc 1 71 2 is_stmt 1 view .LVU89
 317              		.loc 1 71 27 is_stmt 0 view .LVU90
 318 0028 4FF09141 		mov	r1, #1216348160
 319 002c 2846     		mov	r0, r5
 320 002e FFF7FEFF 		bl	__aeabi_fmul
 321              	.LVL24:
 322 0032 FFF7FEFF 		bl	__aeabi_f2iz
 323              	.LVL25:
 324              		.loc 1 71 25 view .LVU91
 325 0036 E063     		str	r0, [r4, #60]
  72:Core/Src/servo_iq18.c **** 	servo->pid_position.dt = _IQ18(dt);
 326              		.loc 1 72 2 is_stmt 1 view .LVU92
 327              		.loc 1 72 27 is_stmt 0 view .LVU93
 328 0038 4FF09141 		mov	r1, #1216348160
 329 003c 0498     		ldr	r0, [sp, #16]	@ float
 330 003e FFF7FEFF 		bl	__aeabi_fmul
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 8


 331              	.LVL26:
 332 0042 FFF7FEFF 		bl	__aeabi_f2iz
 333              	.LVL27:
 334              		.loc 1 72 25 view .LVU94
 335 0046 6065     		str	r0, [r4, #84]
  73:Core/Src/servo_iq18.c **** 	servo->pid_position.kb = _IQ18(kb);
 336              		.loc 1 73 2 is_stmt 1 view .LVU95
 337              		.loc 1 73 27 is_stmt 0 view .LVU96
 338 0048 4FF09141 		mov	r1, #1216348160
 339 004c 0598     		ldr	r0, [sp, #20]	@ float
 340 004e FFF7FEFF 		bl	__aeabi_fmul
 341              	.LVL28:
 342 0052 FFF7FEFF 		bl	__aeabi_f2iz
 343              	.LVL29:
 344              		.loc 1 73 25 view .LVU97
 345 0056 2064     		str	r0, [r4, #64]
  74:Core/Src/servo_iq18.c **** }
 346              		.loc 1 74 1 view .LVU98
 347 0058 70BD     		pop	{r4, r5, r6, pc}
 348              		.loc 1 74 1 view .LVU99
 349              		.cfi_endproc
 350              	.LFE68:
 352              		.section	.text.servo_iq18_velocity_init,"ax",%progbits
 353              		.align	1
 354              		.global	servo_iq18_velocity_init
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 359              	servo_iq18_velocity_init:
 360              	.LVL30:
 361              	.LFB69:
  75:Core/Src/servo_iq18.c **** 
  76:Core/Src/servo_iq18.c **** void servo_iq18_velocity_init(servo_iq18_t *servo, float kp, float ki, float kd,
  77:Core/Src/servo_iq18.c **** 		float dt, float kb) {
 362              		.loc 1 77 23 is_stmt 1 view -0
 363              		.cfi_startproc
 364              		@ args = 8, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366              		.loc 1 77 23 is_stmt 0 view .LVU101
 367 0000 70B5     		push	{r4, r5, r6, lr}
 368              		.cfi_def_cfa_offset 16
 369              		.cfi_offset 4, -16
 370              		.cfi_offset 5, -12
 371              		.cfi_offset 6, -8
 372              		.cfi_offset 14, -4
 373 0002 0446     		mov	r4, r0
 374 0004 0846     		mov	r0, r1
 375              	.LVL31:
 376              		.loc 1 77 23 view .LVU102
 377 0006 1646     		mov	r6, r2
 378 0008 1D46     		mov	r5, r3
  78:Core/Src/servo_iq18.c **** 	servo->pid_velocity.kp = _IQ18(kp);
 379              		.loc 1 78 2 is_stmt 1 view .LVU103
 380              		.loc 1 78 27 is_stmt 0 view .LVU104
 381 000a 4FF09141 		mov	r1, #1216348160
 382              	.LVL32:
 383              		.loc 1 78 27 view .LVU105
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 9


 384 000e FFF7FEFF 		bl	__aeabi_fmul
 385              	.LVL33:
 386              		.loc 1 78 27 view .LVU106
 387 0012 FFF7FEFF 		bl	__aeabi_f2iz
 388              	.LVL34:
 389              		.loc 1 78 25 view .LVU107
 390 0016 2067     		str	r0, [r4, #112]
  79:Core/Src/servo_iq18.c **** 	servo->pid_velocity.ki = _IQ18(ki);
 391              		.loc 1 79 2 is_stmt 1 view .LVU108
 392              		.loc 1 79 27 is_stmt 0 view .LVU109
 393 0018 4FF09141 		mov	r1, #1216348160
 394 001c 3046     		mov	r0, r6
 395 001e FFF7FEFF 		bl	__aeabi_fmul
 396              	.LVL35:
 397 0022 FFF7FEFF 		bl	__aeabi_f2iz
 398              	.LVL36:
 399              		.loc 1 79 25 view .LVU110
 400 0026 6067     		str	r0, [r4, #116]
  80:Core/Src/servo_iq18.c **** 	servo->pid_velocity.kd = _IQ18(kd);
 401              		.loc 1 80 2 is_stmt 1 view .LVU111
 402              		.loc 1 80 27 is_stmt 0 view .LVU112
 403 0028 4FF09141 		mov	r1, #1216348160
 404 002c 2846     		mov	r0, r5
 405 002e FFF7FEFF 		bl	__aeabi_fmul
 406              	.LVL37:
 407 0032 FFF7FEFF 		bl	__aeabi_f2iz
 408              	.LVL38:
 409              		.loc 1 80 25 view .LVU113
 410 0036 A067     		str	r0, [r4, #120]
  81:Core/Src/servo_iq18.c **** 	servo->pid_velocity.dt = _IQ18(dt);
 411              		.loc 1 81 2 is_stmt 1 view .LVU114
 412              		.loc 1 81 27 is_stmt 0 view .LVU115
 413 0038 4FF09141 		mov	r1, #1216348160
 414 003c 0498     		ldr	r0, [sp, #16]	@ float
 415 003e FFF7FEFF 		bl	__aeabi_fmul
 416              	.LVL39:
 417 0042 FFF7FEFF 		bl	__aeabi_f2iz
 418              	.LVL40:
 419 0046 0546     		mov	r5, r0
 420              	.LVL41:
 421              		.loc 1 81 25 view .LVU116
 422 0048 C4F89000 		str	r0, [r4, #144]
  82:Core/Src/servo_iq18.c **** 	servo->pid_velocity.kb = _IQ18(kb);
 423              		.loc 1 82 2 is_stmt 1 view .LVU117
 424              		.loc 1 82 27 is_stmt 0 view .LVU118
 425 004c 4FF09141 		mov	r1, #1216348160
 426 0050 0598     		ldr	r0, [sp, #20]	@ float
 427 0052 FFF7FEFF 		bl	__aeabi_fmul
 428              	.LVL42:
 429 0056 FFF7FEFF 		bl	__aeabi_f2iz
 430              	.LVL43:
 431              		.loc 1 82 25 view .LVU119
 432 005a E067     		str	r0, [r4, #124]
  83:Core/Src/servo_iq18.c **** 	servo->encoder.dt = _IQ18(dt);
 433              		.loc 1 83 2 is_stmt 1 view .LVU120
 434              		.loc 1 83 20 is_stmt 0 view .LVU121
 435 005c E561     		str	r5, [r4, #28]
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 10


  84:Core/Src/servo_iq18.c **** }
 436              		.loc 1 84 1 view .LVU122
 437 005e 70BD     		pop	{r4, r5, r6, pc}
 438              		.loc 1 84 1 view .LVU123
 439              		.cfi_endproc
 440              	.LFE69:
 442              		.section	.text.servo_iq18_current_init,"ax",%progbits
 443              		.align	1
 444              		.global	servo_iq18_current_init
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 449              	servo_iq18_current_init:
 450              	.LVL44:
 451              	.LFB70:
  85:Core/Src/servo_iq18.c **** 
  86:Core/Src/servo_iq18.c **** void servo_iq18_current_init(servo_iq18_t *servo, float ratedCurrent, float kp,
  87:Core/Src/servo_iq18.c **** 		float ki, float kd, float dt, float kb) {
 452              		.loc 1 87 43 is_stmt 1 view -0
 453              		.cfi_startproc
 454              		@ args = 12, pretend = 0, frame = 0
 455              		@ frame_needed = 0, uses_anonymous_args = 0
 456              		.loc 1 87 43 is_stmt 0 view .LVU125
 457 0000 70B5     		push	{r4, r5, r6, lr}
 458              		.cfi_def_cfa_offset 16
 459              		.cfi_offset 4, -16
 460              		.cfi_offset 5, -12
 461              		.cfi_offset 6, -8
 462              		.cfi_offset 14, -4
 463 0002 0446     		mov	r4, r0
 464 0004 0D46     		mov	r5, r1
 465 0006 1E46     		mov	r6, r3
  88:Core/Src/servo_iq18.c **** 	servo->pid_current.kp = _IQ18(kp);
 466              		.loc 1 88 2 is_stmt 1 view .LVU126
 467              		.loc 1 88 26 is_stmt 0 view .LVU127
 468 0008 4FF09141 		mov	r1, #1216348160
 469              	.LVL45:
 470              		.loc 1 88 26 view .LVU128
 471 000c 1046     		mov	r0, r2
 472              	.LVL46:
 473              		.loc 1 88 26 view .LVU129
 474 000e FFF7FEFF 		bl	__aeabi_fmul
 475              	.LVL47:
 476              		.loc 1 88 26 view .LVU130
 477 0012 FFF7FEFF 		bl	__aeabi_f2iz
 478              	.LVL48:
 479              		.loc 1 88 24 view .LVU131
 480 0016 C4F8AC00 		str	r0, [r4, #172]
  89:Core/Src/servo_iq18.c **** 	servo->pid_current.ki = _IQ18(ki);
 481              		.loc 1 89 2 is_stmt 1 view .LVU132
 482              		.loc 1 89 26 is_stmt 0 view .LVU133
 483 001a 4FF09141 		mov	r1, #1216348160
 484 001e 3046     		mov	r0, r6
 485 0020 FFF7FEFF 		bl	__aeabi_fmul
 486              	.LVL49:
 487 0024 FFF7FEFF 		bl	__aeabi_f2iz
 488              	.LVL50:
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 11


 489              		.loc 1 89 24 view .LVU134
 490 0028 C4F8B000 		str	r0, [r4, #176]
  90:Core/Src/servo_iq18.c **** 	servo->pid_current.kd = _IQ18(kd);
 491              		.loc 1 90 2 is_stmt 1 view .LVU135
 492              		.loc 1 90 26 is_stmt 0 view .LVU136
 493 002c 4FF09141 		mov	r1, #1216348160
 494 0030 0498     		ldr	r0, [sp, #16]	@ float
 495 0032 FFF7FEFF 		bl	__aeabi_fmul
 496              	.LVL51:
 497 0036 FFF7FEFF 		bl	__aeabi_f2iz
 498              	.LVL52:
 499              		.loc 1 90 24 view .LVU137
 500 003a C4F8B400 		str	r0, [r4, #180]
  91:Core/Src/servo_iq18.c **** 	servo->pid_current.dt = _IQ18(dt);
 501              		.loc 1 91 2 is_stmt 1 view .LVU138
 502              		.loc 1 91 26 is_stmt 0 view .LVU139
 503 003e 4FF09141 		mov	r1, #1216348160
 504 0042 0598     		ldr	r0, [sp, #20]	@ float
 505 0044 FFF7FEFF 		bl	__aeabi_fmul
 506              	.LVL53:
 507 0048 FFF7FEFF 		bl	__aeabi_f2iz
 508              	.LVL54:
 509              		.loc 1 91 24 view .LVU140
 510 004c C4F8CC00 		str	r0, [r4, #204]
  92:Core/Src/servo_iq18.c **** 	servo->pid_current.kb = _IQ18(kb);
 511              		.loc 1 92 2 is_stmt 1 view .LVU141
 512              		.loc 1 92 26 is_stmt 0 view .LVU142
 513 0050 4FF09141 		mov	r1, #1216348160
 514 0054 0698     		ldr	r0, [sp, #24]	@ float
 515 0056 FFF7FEFF 		bl	__aeabi_fmul
 516              	.LVL55:
 517 005a FFF7FEFF 		bl	__aeabi_f2iz
 518              	.LVL56:
 519              		.loc 1 92 24 view .LVU143
 520 005e C4F8B800 		str	r0, [r4, #184]
  93:Core/Src/servo_iq18.c **** 	servo->maxCurrent = _IQ18(ratedCurrent);
 521              		.loc 1 93 2 is_stmt 1 view .LVU144
 522              		.loc 1 93 22 is_stmt 0 view .LVU145
 523 0062 4FF09141 		mov	r1, #1216348160
 524 0066 2846     		mov	r0, r5
 525 0068 FFF7FEFF 		bl	__aeabi_fmul
 526              	.LVL57:
 527 006c 0646     		mov	r6, r0
 528              	.LVL58:
 529              		.loc 1 93 22 view .LVU146
 530 006e FFF7FEFF 		bl	__aeabi_f2iz
 531              	.LVL59:
 532              		.loc 1 93 20 view .LVU147
 533 0072 C4F80C01 		str	r0, [r4, #268]
  94:Core/Src/servo_iq18.c **** 	if (servo->controllerLoops == Triple) {
 534              		.loc 1 94 2 is_stmt 1 view .LVU148
 535              		.loc 1 94 11 is_stmt 0 view .LVU149
 536 0076 94F81431 		ldrb	r3, [r4, #276]	@ zero_extendqisi2
 537              		.loc 1 94 5 view .LVU150
 538 007a 022B     		cmp	r3, #2
 539 007c 00D0     		beq	.L25
 540              	.LVL60:
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 12


 541              	.L22:
  95:Core/Src/servo_iq18.c **** 		servo->pid_velocity.lowerLimit = _IQ18(-ratedCurrent);
  96:Core/Src/servo_iq18.c **** 		servo->pid_velocity.upperLimit = _IQ18(ratedCurrent);
  97:Core/Src/servo_iq18.c **** 	}
  98:Core/Src/servo_iq18.c **** }
 542              		.loc 1 98 1 view .LVU151
 543 007e 70BD     		pop	{r4, r5, r6, pc}
 544              	.LVL61:
 545              	.L25:
 546              		.loc 1 98 1 view .LVU152
 547 0080 0546     		mov	r5, r0
 548              	.LVL62:
  95:Core/Src/servo_iq18.c **** 		servo->pid_velocity.lowerLimit = _IQ18(-ratedCurrent);
 549              		.loc 1 95 3 is_stmt 1 view .LVU153
  95:Core/Src/servo_iq18.c **** 		servo->pid_velocity.lowerLimit = _IQ18(-ratedCurrent);
 550              		.loc 1 95 36 is_stmt 0 view .LVU154
 551 0082 06F10040 		add	r0, r6, #-2147483648
 552 0086 FFF7FEFF 		bl	__aeabi_f2iz
 553              	.LVL63:
  95:Core/Src/servo_iq18.c **** 		servo->pid_velocity.lowerLimit = _IQ18(-ratedCurrent);
 554              		.loc 1 95 34 view .LVU155
 555 008a C4F89800 		str	r0, [r4, #152]
  96:Core/Src/servo_iq18.c **** 	}
 556              		.loc 1 96 3 is_stmt 1 view .LVU156
  96:Core/Src/servo_iq18.c **** 	}
 557              		.loc 1 96 34 is_stmt 0 view .LVU157
 558 008e C4F89450 		str	r5, [r4, #148]
 559              		.loc 1 98 1 view .LVU158
 560 0092 F4E7     		b	.L22
 561              		.cfi_endproc
 562              	.LFE70:
 564              		.section	.text.servo_iq18_setPositionTolerance,"ax",%progbits
 565              		.align	1
 566              		.global	servo_iq18_setPositionTolerance
 567              		.syntax unified
 568              		.thumb
 569              		.thumb_func
 571              	servo_iq18_setPositionTolerance:
 572              	.LVL64:
 573              	.LFB71:
  99:Core/Src/servo_iq18.c **** 
 100:Core/Src/servo_iq18.c **** void servo_iq18_setPositionTolerance(servo_iq18_t *servo, float tolerance) {
 574              		.loc 1 100 76 is_stmt 1 view -0
 575              		.cfi_startproc
 576              		@ args = 0, pretend = 0, frame = 0
 577              		@ frame_needed = 0, uses_anonymous_args = 0
 578              		.loc 1 100 76 is_stmt 0 view .LVU160
 579 0000 10B5     		push	{r4, lr}
 580              		.cfi_def_cfa_offset 8
 581              		.cfi_offset 4, -8
 582              		.cfi_offset 14, -4
 583 0002 0446     		mov	r4, r0
 584 0004 0846     		mov	r0, r1
 585              	.LVL65:
 101:Core/Src/servo_iq18.c **** 	servo->pid_position.toleranceBand = _IQ18(tolerance);
 586              		.loc 1 101 2 is_stmt 1 view .LVU161
 587              		.loc 1 101 38 is_stmt 0 view .LVU162
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 13


 588 0006 4FF09141 		mov	r1, #1216348160
 589              	.LVL66:
 590              		.loc 1 101 38 view .LVU163
 591 000a FFF7FEFF 		bl	__aeabi_fmul
 592              	.LVL67:
 593              		.loc 1 101 38 view .LVU164
 594 000e FFF7FEFF 		bl	__aeabi_f2iz
 595              	.LVL68:
 596              		.loc 1 101 36 view .LVU165
 597 0012 6064     		str	r0, [r4, #68]
 102:Core/Src/servo_iq18.c **** }
 598              		.loc 1 102 1 view .LVU166
 599 0014 10BD     		pop	{r4, pc}
 600              		.loc 1 102 1 view .LVU167
 601              		.cfi_endproc
 602              	.LFE71:
 604              		.section	.text.servo_iq18_getState,"ax",%progbits
 605              		.align	1
 606              		.global	servo_iq18_getState
 607              		.syntax unified
 608              		.thumb
 609              		.thumb_func
 611              	servo_iq18_getState:
 612              	.LVL69:
 613              	.LFB72:
 103:Core/Src/servo_iq18.c **** 
 104:Core/Src/servo_iq18.c **** int servo_iq18_getState(servo_iq18_t *servo) {
 614              		.loc 1 104 46 is_stmt 1 view -0
 615              		.cfi_startproc
 616              		@ args = 0, pretend = 0, frame = 0
 617              		@ frame_needed = 0, uses_anonymous_args = 0
 618              		@ link register save eliminated.
 105:Core/Src/servo_iq18.c **** 	if (servo->pid_position.error == 0) {
 619              		.loc 1 105 2 view .LVU169
 620              		.loc 1 105 25 is_stmt 0 view .LVU170
 621 0000 006B     		ldr	r0, [r0, #48]
 622              	.LVL70:
 623              		.loc 1 105 5 view .LVU171
 624 0002 00B1     		cbz	r0, .L28
 106:Core/Src/servo_iq18.c **** 		return 0;
 107:Core/Src/servo_iq18.c **** 	}
 108:Core/Src/servo_iq18.c **** 	return 1;
 625              		.loc 1 108 9 view .LVU172
 626 0004 0120     		movs	r0, #1
 627              	.L28:
 109:Core/Src/servo_iq18.c **** }
 628              		.loc 1 109 1 view .LVU173
 629 0006 7047     		bx	lr
 630              		.cfi_endproc
 631              	.LFE72:
 633              		.section	.text.servo_iq18_getDirection,"ax",%progbits
 634              		.align	1
 635              		.global	servo_iq18_getDirection
 636              		.syntax unified
 637              		.thumb
 638              		.thumb_func
 640              	servo_iq18_getDirection:
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 14


 641              	.LVL71:
 642              	.LFB73:
 110:Core/Src/servo_iq18.c **** int servo_iq18_getDirection(servo_iq18_t *servo) {
 643              		.loc 1 110 50 is_stmt 1 view -0
 644              		.cfi_startproc
 645              		@ args = 0, pretend = 0, frame = 0
 646              		@ frame_needed = 0, uses_anonymous_args = 0
 647              		@ link register save eliminated.
 111:Core/Src/servo_iq18.c **** 	if (servo->encoder.angularVelocity > 0) {
 648              		.loc 1 111 2 view .LVU175
 649              		.loc 1 111 20 is_stmt 0 view .LVU176
 650 0000 0369     		ldr	r3, [r0, #16]
 651              		.loc 1 111 5 view .LVU177
 652 0002 002B     		cmp	r3, #0
 653 0004 03DC     		bgt	.L34
 112:Core/Src/servo_iq18.c **** 		return 1 * servo->reverseFlag;
 113:Core/Src/servo_iq18.c **** 	}
 114:Core/Src/servo_iq18.c **** 	if (servo->encoder.angularVelocity < 0) {
 654              		.loc 1 114 2 is_stmt 1 view .LVU178
 655              		.loc 1 114 5 is_stmt 0 view .LVU179
 656 0006 002B     		cmp	r3, #0
 657 0008 04DB     		blt	.L35
 115:Core/Src/servo_iq18.c **** 		return -1 * servo->reverseFlag;
 116:Core/Src/servo_iq18.c **** 	}
 117:Core/Src/servo_iq18.c **** 	return 0;
 658              		.loc 1 117 9 view .LVU180
 659 000a 0020     		movs	r0, #0
 660              	.LVL72:
 118:Core/Src/servo_iq18.c **** }
 661              		.loc 1 118 1 view .LVU181
 662 000c 7047     		bx	lr
 663              	.LVL73:
 664              	.L34:
 112:Core/Src/servo_iq18.c **** 		return 1 * servo->reverseFlag;
 665              		.loc 1 112 3 is_stmt 1 view .LVU182
 112:Core/Src/servo_iq18.c **** 		return 1 * servo->reverseFlag;
 666              		.loc 1 112 19 is_stmt 0 view .LVU183
 667 000e 90F91001 		ldrsb	r0, [r0, #272]
 668              	.LVL74:
 112:Core/Src/servo_iq18.c **** 		return 1 * servo->reverseFlag;
 669              		.loc 1 112 12 view .LVU184
 670 0012 7047     		bx	lr
 671              	.LVL75:
 672              	.L35:
 115:Core/Src/servo_iq18.c **** 		return -1 * servo->reverseFlag;
 673              		.loc 1 115 3 is_stmt 1 view .LVU185
 115:Core/Src/servo_iq18.c **** 		return -1 * servo->reverseFlag;
 674              		.loc 1 115 20 is_stmt 0 view .LVU186
 675 0014 90F91001 		ldrsb	r0, [r0, #272]
 676              	.LVL76:
 115:Core/Src/servo_iq18.c **** 		return -1 * servo->reverseFlag;
 677              		.loc 1 115 13 view .LVU187
 678 0018 4042     		rsbs	r0, r0, #0
 679 001a 7047     		bx	lr
 680              		.cfi_endproc
 681              	.LFE73:
 683              		.section	.text.servo_iq18_getCurrentDirection,"ax",%progbits
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 15


 684              		.align	1
 685              		.global	servo_iq18_getCurrentDirection
 686              		.syntax unified
 687              		.thumb
 688              		.thumb_func
 690              	servo_iq18_getCurrentDirection:
 691              	.LVL77:
 692              	.LFB74:
 119:Core/Src/servo_iq18.c **** 
 120:Core/Src/servo_iq18.c **** int servo_iq18_getCurrentDirection(servo_iq18_t *servo) {
 693              		.loc 1 120 57 is_stmt 1 view -0
 694              		.cfi_startproc
 695              		@ args = 0, pretend = 0, frame = 0
 696              		@ frame_needed = 0, uses_anonymous_args = 0
 697              		@ link register save eliminated.
 121:Core/Src/servo_iq18.c **** 	return servo->driver.dir;
 698              		.loc 1 121 2 view .LVU189
 122:Core/Src/servo_iq18.c **** }
 699              		.loc 1 122 1 is_stmt 0 view .LVU190
 700 0000 90F9F800 		ldrsb	r0, [r0, #248]
 701              	.LVL78:
 702              		.loc 1 122 1 view .LVU191
 703 0004 7047     		bx	lr
 704              		.cfi_endproc
 705              	.LFE74:
 707              		.section	.text.servo_iq18_positionLoop,"ax",%progbits
 708              		.align	1
 709              		.global	servo_iq18_positionLoop
 710              		.syntax unified
 711              		.thumb
 712              		.thumb_func
 714              	servo_iq18_positionLoop:
 715              	.LVL79:
 716              	.LFB75:
 123:Core/Src/servo_iq18.c **** 
 124:Core/Src/servo_iq18.c **** void servo_iq18_positionLoop(servo_iq18_t *servo) {
 717              		.loc 1 124 51 is_stmt 1 view -0
 718              		.cfi_startproc
 719              		@ args = 0, pretend = 0, frame = 0
 720              		@ frame_needed = 0, uses_anonymous_args = 0
 721              		.loc 1 124 51 is_stmt 0 view .LVU193
 722 0000 70B5     		push	{r4, r5, r6, lr}
 723              		.cfi_def_cfa_offset 16
 724              		.cfi_offset 4, -16
 725              		.cfi_offset 5, -12
 726              		.cfi_offset 6, -8
 727              		.cfi_offset 14, -4
 728 0002 0446     		mov	r4, r0
 125:Core/Src/servo_iq18.c **** //	encoder_updatePosition_iq18(&servo->encoder);
 126:Core/Src/servo_iq18.c **** 
 127:Core/Src/servo_iq18.c **** 	switch (servo->currentMode) {
 729              		.loc 1 127 2 is_stmt 1 view .LVU194
 730              		.loc 1 127 15 is_stmt 0 view .LVU195
 731 0004 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 732              		.loc 1 127 2 view .LVU196
 733 0008 012B     		cmp	r3, #1
 734 000a 06D0     		beq	.L42
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 16


 128:Core/Src/servo_iq18.c **** 	case Position: {
 129:Core/Src/servo_iq18.c **** 		pid_iq18_calculate(&servo->pid_position, servo->positionSetpoint,
 130:Core/Src/servo_iq18.c **** 				encoder_getAngle_iq18(&servo->encoder));
 131:Core/Src/servo_iq18.c **** 		if (servo->controllerLoops == Single) {
 132:Core/Src/servo_iq18.c **** 			int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 133:Core/Src/servo_iq18.c **** 					&servo->pid_position) * servo->driver.maxDuty) >> 18);
 134:Core/Src/servo_iq18.c **** 			pwm_setSpeed(&servo->driver, duty);
 135:Core/Src/servo_iq18.c **** 		} else {
 136:Core/Src/servo_iq18.c **** 			servo->velocitySetpoint = pid_iq18_getOutput(&servo->pid_position);
 137:Core/Src/servo_iq18.c **** 		}
 138:Core/Src/servo_iq18.c **** 		break;
 139:Core/Src/servo_iq18.c **** 	}
 140:Core/Src/servo_iq18.c **** 	default: {
 141:Core/Src/servo_iq18.c **** 		pid_iq18_reset(&servo->pid_position);
 735              		.loc 1 141 3 is_stmt 1 view .LVU197
 736 000c 3030     		adds	r0, r0, #48
 737              	.LVL80:
 738              		.loc 1 141 3 is_stmt 0 view .LVU198
 739 000e FFF7FEFF 		bl	pid_iq18_reset
 740              	.LVL81:
 142:Core/Src/servo_iq18.c **** 		servo->positionSetpoint = 0;
 741              		.loc 1 142 3 is_stmt 1 view .LVU199
 742              		.loc 1 142 27 is_stmt 0 view .LVU200
 743 0012 0023     		movs	r3, #0
 744 0014 C4F8FC30 		str	r3, [r4, #252]
 143:Core/Src/servo_iq18.c **** 		break;
 745              		.loc 1 143 3 is_stmt 1 view .LVU201
 746              	.L37:
 144:Core/Src/servo_iq18.c **** 	}
 145:Core/Src/servo_iq18.c **** 	}
 146:Core/Src/servo_iq18.c **** }
 747              		.loc 1 146 1 is_stmt 0 view .LVU202
 748 0018 70BD     		pop	{r4, r5, r6, pc}
 749              	.LVL82:
 750              	.L42:
 129:Core/Src/servo_iq18.c **** 				encoder_getAngle_iq18(&servo->encoder));
 751              		.loc 1 129 3 is_stmt 1 view .LVU203
 752 001a 00F13005 		add	r5, r0, #48
 753 001e D0F8FC60 		ldr	r6, [r0, #252]
 754 0022 FFF7FEFF 		bl	encoder_getAngle_iq18
 755              	.LVL83:
 129:Core/Src/servo_iq18.c **** 				encoder_getAngle_iq18(&servo->encoder));
 756              		.loc 1 129 3 is_stmt 0 view .LVU204
 757 0026 0246     		mov	r2, r0
 129:Core/Src/servo_iq18.c **** 				encoder_getAngle_iq18(&servo->encoder));
 758              		.loc 1 129 3 discriminator 1 view .LVU205
 759 0028 3146     		mov	r1, r6
 760 002a 2846     		mov	r0, r5
 761 002c FFF7FEFF 		bl	pid_iq18_calculate
 762              	.LVL84:
 131:Core/Src/servo_iq18.c **** 			int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 763              		.loc 1 131 3 is_stmt 1 view .LVU206
 131:Core/Src/servo_iq18.c **** 			int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 764              		.loc 1 131 12 is_stmt 0 view .LVU207
 765 0030 94F81431 		ldrb	r3, [r4, #276]	@ zero_extendqisi2
 131:Core/Src/servo_iq18.c **** 			int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 766              		.loc 1 131 6 view .LVU208
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 17


 767 0034 8BB9     		cbnz	r3, .L39
 768              	.LBB2:
 132:Core/Src/servo_iq18.c **** 					&servo->pid_position) * servo->driver.maxDuty) >> 18);
 769              		.loc 1 132 4 is_stmt 1 view .LVU209
 132:Core/Src/servo_iq18.c **** 					&servo->pid_position) * servo->driver.maxDuty) >> 18);
 770              		.loc 1 132 41 is_stmt 0 view .LVU210
 771 0036 2846     		mov	r0, r5
 772 0038 FFF7FEFF 		bl	pid_iq18_getOutput
 773              	.LVL85:
 132:Core/Src/servo_iq18.c **** 					&servo->pid_position) * servo->driver.maxDuty) >> 18);
 774              		.loc 1 132 31 discriminator 1 view .LVU211
 775 003c C217     		asrs	r2, r0, #31
 133:Core/Src/servo_iq18.c **** 			pwm_setSpeed(&servo->driver, duty);
 776              		.loc 1 133 43 view .LVU212
 777 003e B4F8F430 		ldrh	r3, [r4, #244]
 133:Core/Src/servo_iq18.c **** 			pwm_setSpeed(&servo->driver, duty);
 778              		.loc 1 133 28 view .LVU213
 779 0042 A0FB0301 		umull	r0, r1, r0, r3
 780 0046 03FB0211 		mla	r1, r3, r2, r1
 133:Core/Src/servo_iq18.c **** 			pwm_setSpeed(&servo->driver, duty);
 781              		.loc 1 133 53 view .LVU214
 782 004a 800C     		lsrs	r0, r0, #18
 783              	.LVL86:
 134:Core/Src/servo_iq18.c **** 		} else {
 784              		.loc 1 134 4 is_stmt 1 view .LVU215
 785 004c 40EA8131 		orr	r1, r0, r1, lsl #14
 786              	.LVL87:
 134:Core/Src/servo_iq18.c **** 		} else {
 787              		.loc 1 134 4 is_stmt 0 view .LVU216
 788 0050 04F1E400 		add	r0, r4, #228
 789 0054 FFF7FEFF 		bl	pwm_setSpeed
 790              	.LVL88:
 134:Core/Src/servo_iq18.c **** 		} else {
 791              		.loc 1 134 4 view .LVU217
 792              	.LBE2:
 793 0058 DEE7     		b	.L37
 794              	.LVL89:
 795              	.L39:
 136:Core/Src/servo_iq18.c **** 		}
 796              		.loc 1 136 4 is_stmt 1 view .LVU218
 136:Core/Src/servo_iq18.c **** 		}
 797              		.loc 1 136 30 is_stmt 0 view .LVU219
 798 005a 2846     		mov	r0, r5
 799 005c FFF7FEFF 		bl	pid_iq18_getOutput
 800              	.LVL90:
 136:Core/Src/servo_iq18.c **** 		}
 801              		.loc 1 136 28 discriminator 1 view .LVU220
 802 0060 C4F80001 		str	r0, [r4, #256]
 803 0064 D8E7     		b	.L37
 804              		.cfi_endproc
 805              	.LFE75:
 807              		.section	.text.servo_iq18_velocityLoop,"ax",%progbits
 808              		.align	1
 809              		.global	servo_iq18_velocityLoop
 810              		.syntax unified
 811              		.thumb
 812              		.thumb_func
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 18


 814              	servo_iq18_velocityLoop:
 815              	.LVL91:
 816              	.LFB76:
 147:Core/Src/servo_iq18.c **** 
 148:Core/Src/servo_iq18.c **** void servo_iq18_velocityLoop(servo_iq18_t *servo) {
 817              		.loc 1 148 51 is_stmt 1 view -0
 818              		.cfi_startproc
 819              		@ args = 0, pretend = 0, frame = 0
 820              		@ frame_needed = 0, uses_anonymous_args = 0
 821              		.loc 1 148 51 is_stmt 0 view .LVU222
 822 0000 38B5     		push	{r3, r4, r5, lr}
 823              		.cfi_def_cfa_offset 16
 824              		.cfi_offset 3, -16
 825              		.cfi_offset 4, -12
 826              		.cfi_offset 5, -8
 827              		.cfi_offset 14, -4
 828 0002 0446     		mov	r4, r0
 149:Core/Src/servo_iq18.c **** 	// encoder_updatePosition_iq18(&servo->encoder);
 150:Core/Src/servo_iq18.c **** 	// encoder_updateVelocity_qep_iq18(&servo->encoder);
 151:Core/Src/servo_iq18.c **** 	if (servo->currentMode != Current) {
 829              		.loc 1 151 2 is_stmt 1 view .LVU223
 830              		.loc 1 151 11 is_stmt 0 view .LVU224
 831 0004 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 832              		.loc 1 151 5 view .LVU225
 833 0008 032B     		cmp	r3, #3
 834 000a 0ED1     		bne	.L50
 835              	.LVL92:
 836              	.L44:
 152:Core/Src/servo_iq18.c **** 		pid_iq18_calculate(&servo->pid_velocity, servo->velocitySetpoint,
 153:Core/Src/servo_iq18.c **** 				encoder_getVelocity_iq18(&servo->encoder));
 154:Core/Src/servo_iq18.c **** 	}
 155:Core/Src/servo_iq18.c **** 
 156:Core/Src/servo_iq18.c **** 	switch (servo->controllerLoops) {
 837              		.loc 1 156 2 is_stmt 1 view .LVU226
 838              		.loc 1 156 15 is_stmt 0 view .LVU227
 839 000c 94F81431 		ldrb	r3, [r4, #276]	@ zero_extendqisi2
 840              		.loc 1 156 2 view .LVU228
 841 0010 012B     		cmp	r3, #1
 842 0012 15D0     		beq	.L45
 843 0014 022B     		cmp	r3, #2
 844 0016 26D0     		beq	.L46
 845 0018 33B9     		cbnz	r3, .L43
 846              	.LBB3:
 157:Core/Src/servo_iq18.c **** 	case Single:
 158:Core/Src/servo_iq18.c **** 		pid_iq18_reset(&servo->pid_velocity);
 847              		.loc 1 158 3 is_stmt 1 view .LVU229
 848 001a 04F16C00 		add	r0, r4, #108
 849 001e FFF7FEFF 		bl	pid_iq18_reset
 850              	.LVL93:
 159:Core/Src/servo_iq18.c **** 		servo->velocitySetpoint = 0;
 851              		.loc 1 159 3 view .LVU230
 852              		.loc 1 159 27 is_stmt 0 view .LVU231
 853 0022 0023     		movs	r3, #0
 854 0024 C4F80031 		str	r3, [r4, #256]
 160:Core/Src/servo_iq18.c **** 		break;
 855              		.loc 1 160 3 is_stmt 1 view .LVU232
 856              	.L43:
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 19


 857              	.LBE3:
 161:Core/Src/servo_iq18.c **** 	case Double:
 162:Core/Src/servo_iq18.c **** 		int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 163:Core/Src/servo_iq18.c **** 				&servo->pid_velocity) * servo->driver.maxDuty) >> 18);
 164:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 165:Core/Src/servo_iq18.c **** 		break;
 166:Core/Src/servo_iq18.c **** 	case Triple:
 167:Core/Src/servo_iq18.c **** 		if (servo->currentMode != Current) {
 168:Core/Src/servo_iq18.c **** 			servo->currentSetpoint = pid_iq18_getOutput(&servo->pid_velocity);
 169:Core/Src/servo_iq18.c **** 		} else {
 170:Core/Src/servo_iq18.c **** 			pid_iq18_reset(&servo->pid_velocity);
 171:Core/Src/servo_iq18.c **** 			servo->velocitySetpoint = 0;
 172:Core/Src/servo_iq18.c **** 		}
 173:Core/Src/servo_iq18.c **** 		break;
 174:Core/Src/servo_iq18.c **** 	}
 175:Core/Src/servo_iq18.c **** }
 858              		.loc 1 175 1 is_stmt 0 view .LVU233
 859 0028 38BD     		pop	{r3, r4, r5, pc}
 860              	.LVL94:
 861              	.L50:
 152:Core/Src/servo_iq18.c **** 				encoder_getVelocity_iq18(&servo->encoder));
 862              		.loc 1 152 3 is_stmt 1 view .LVU234
 863 002a D0F80051 		ldr	r5, [r0, #256]
 864 002e FFF7FEFF 		bl	encoder_getVelocity_iq18
 865              	.LVL95:
 152:Core/Src/servo_iq18.c **** 				encoder_getVelocity_iq18(&servo->encoder));
 866              		.loc 1 152 3 is_stmt 0 view .LVU235
 867 0032 0246     		mov	r2, r0
 152:Core/Src/servo_iq18.c **** 				encoder_getVelocity_iq18(&servo->encoder));
 868              		.loc 1 152 3 discriminator 1 view .LVU236
 869 0034 2946     		mov	r1, r5
 870 0036 04F16C00 		add	r0, r4, #108
 871 003a FFF7FEFF 		bl	pid_iq18_calculate
 872              	.LVL96:
 873 003e E5E7     		b	.L44
 874              	.L45:
 875              	.LBB4:
 162:Core/Src/servo_iq18.c **** 				&servo->pid_velocity) * servo->driver.maxDuty) >> 18);
 876              		.loc 1 162 3 is_stmt 1 view .LVU237
 162:Core/Src/servo_iq18.c **** 				&servo->pid_velocity) * servo->driver.maxDuty) >> 18);
 877              		.loc 1 162 40 is_stmt 0 view .LVU238
 878 0040 04F16C00 		add	r0, r4, #108
 879 0044 FFF7FEFF 		bl	pid_iq18_getOutput
 880              	.LVL97:
 162:Core/Src/servo_iq18.c **** 				&servo->pid_velocity) * servo->driver.maxDuty) >> 18);
 881              		.loc 1 162 30 discriminator 1 view .LVU239
 882 0048 C217     		asrs	r2, r0, #31
 163:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 883              		.loc 1 163 42 view .LVU240
 884 004a B4F8F430 		ldrh	r3, [r4, #244]
 163:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 885              		.loc 1 163 27 view .LVU241
 886 004e A0FB0301 		umull	r0, r1, r0, r3
 887 0052 03FB0211 		mla	r1, r3, r2, r1
 163:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 888              		.loc 1 163 52 view .LVU242
 889 0056 800C     		lsrs	r0, r0, #18
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 20


 890              	.LVL98:
 164:Core/Src/servo_iq18.c **** 		break;
 891              		.loc 1 164 3 is_stmt 1 view .LVU243
 892 0058 40EA8131 		orr	r1, r0, r1, lsl #14
 893              	.LVL99:
 164:Core/Src/servo_iq18.c **** 		break;
 894              		.loc 1 164 3 is_stmt 0 view .LVU244
 895 005c 04F1E400 		add	r0, r4, #228
 896 0060 FFF7FEFF 		bl	pwm_setSpeed
 897              	.LVL100:
 165:Core/Src/servo_iq18.c **** 	case Triple:
 898              		.loc 1 165 3 is_stmt 1 view .LVU245
 899 0064 E0E7     		b	.L43
 900              	.LVL101:
 901              	.L46:
 167:Core/Src/servo_iq18.c **** 			servo->currentSetpoint = pid_iq18_getOutput(&servo->pid_velocity);
 902              		.loc 1 167 3 view .LVU246
 167:Core/Src/servo_iq18.c **** 			servo->currentSetpoint = pid_iq18_getOutput(&servo->pid_velocity);
 903              		.loc 1 167 12 is_stmt 0 view .LVU247
 904 0066 94F81531 		ldrb	r3, [r4, #277]	@ zero_extendqisi2
 167:Core/Src/servo_iq18.c **** 			servo->currentSetpoint = pid_iq18_getOutput(&servo->pid_velocity);
 905              		.loc 1 167 6 view .LVU248
 906 006a 032B     		cmp	r3, #3
 907 006c 06D0     		beq	.L48
 168:Core/Src/servo_iq18.c **** 		} else {
 908              		.loc 1 168 4 is_stmt 1 view .LVU249
 168:Core/Src/servo_iq18.c **** 		} else {
 909              		.loc 1 168 29 is_stmt 0 view .LVU250
 910 006e 04F16C00 		add	r0, r4, #108
 911 0072 FFF7FEFF 		bl	pid_iq18_getOutput
 912              	.LVL102:
 168:Core/Src/servo_iq18.c **** 		} else {
 913              		.loc 1 168 27 discriminator 1 view .LVU251
 914 0076 C4F80401 		str	r0, [r4, #260]
 915 007a D5E7     		b	.L43
 916              	.L48:
 170:Core/Src/servo_iq18.c **** 			servo->velocitySetpoint = 0;
 917              		.loc 1 170 4 is_stmt 1 view .LVU252
 918 007c 04F16C00 		add	r0, r4, #108
 919 0080 FFF7FEFF 		bl	pid_iq18_reset
 920              	.LVL103:
 171:Core/Src/servo_iq18.c **** 		}
 921              		.loc 1 171 4 view .LVU253
 171:Core/Src/servo_iq18.c **** 		}
 922              		.loc 1 171 28 is_stmt 0 view .LVU254
 923 0084 0023     		movs	r3, #0
 924 0086 C4F80031 		str	r3, [r4, #256]
 925              	.LBE4:
 926              		.loc 1 175 1 view .LVU255
 927 008a CDE7     		b	.L43
 928              		.cfi_endproc
 929              	.LFE76:
 931              		.section	.text.servo_iq18_currentLoop,"ax",%progbits
 932              		.align	1
 933              		.global	servo_iq18_currentLoop
 934              		.syntax unified
 935              		.thumb
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 21


 936              		.thumb_func
 938              	servo_iq18_currentLoop:
 939              	.LVL104:
 940              	.LFB77:
 176:Core/Src/servo_iq18.c **** 
 177:Core/Src/servo_iq18.c **** void servo_iq18_currentLoop(servo_iq18_t *servo, _iq18 currentFeedback) {
 941              		.loc 1 177 73 is_stmt 1 view -0
 942              		.cfi_startproc
 943              		@ args = 0, pretend = 0, frame = 0
 944              		@ frame_needed = 0, uses_anonymous_args = 0
 945              		.loc 1 177 73 is_stmt 0 view .LVU257
 946 0000 38B5     		push	{r3, r4, r5, lr}
 947              		.cfi_def_cfa_offset 16
 948              		.cfi_offset 3, -16
 949              		.cfi_offset 4, -12
 950              		.cfi_offset 5, -8
 951              		.cfi_offset 14, -4
 952 0002 0446     		mov	r4, r0
 178:Core/Src/servo_iq18.c **** 	if (servo->controllerLoops == Triple) {
 953              		.loc 1 178 2 is_stmt 1 view .LVU258
 954              		.loc 1 178 11 is_stmt 0 view .LVU259
 955 0004 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 956              		.loc 1 178 5 view .LVU260
 957 0008 022B     		cmp	r3, #2
 958 000a 06D0     		beq	.L55
 179:Core/Src/servo_iq18.c **** 		pid_iq18_calculate(&servo->pid_current, servo->currentSetpoint,
 180:Core/Src/servo_iq18.c **** 				currentFeedback);
 181:Core/Src/servo_iq18.c **** 		int32_t duty = (int32_t) (((int64_t) pid_iq18_getOutput(
 182:Core/Src/servo_iq18.c **** 				&servo->pid_current) * servo->driver.maxDuty) >> 18);
 183:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 184:Core/Src/servo_iq18.c **** 	} else {
 185:Core/Src/servo_iq18.c **** 		pid_iq18_reset(&servo->pid_current);
 959              		.loc 1 185 3 is_stmt 1 view .LVU261
 960 000c A830     		adds	r0, r0, #168
 961              	.LVL105:
 962              		.loc 1 185 3 is_stmt 0 view .LVU262
 963 000e FFF7FEFF 		bl	pid_iq18_reset
 964              	.LVL106:
 186:Core/Src/servo_iq18.c **** 		servo->currentSetpoint = 0;
 965              		.loc 1 186 3 is_stmt 1 view .LVU263
 966              		.loc 1 186 26 is_stmt 0 view .LVU264
 967 0012 0023     		movs	r3, #0
 968 0014 C4F80431 		str	r3, [r4, #260]
 969              	.L51:
 187:Core/Src/servo_iq18.c **** 	}
 188:Core/Src/servo_iq18.c **** }
 970              		.loc 1 188 1 view .LVU265
 971 0018 38BD     		pop	{r3, r4, r5, pc}
 972              	.LVL107:
 973              	.L55:
 974              	.LBB5:
 179:Core/Src/servo_iq18.c **** 				currentFeedback);
 975              		.loc 1 179 3 is_stmt 1 view .LVU266
 976 001a 00F1A805 		add	r5, r0, #168
 977 001e 0A46     		mov	r2, r1
 978 0020 D0F80411 		ldr	r1, [r0, #260]
 979              	.LVL108:
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 22


 179:Core/Src/servo_iq18.c **** 				currentFeedback);
 980              		.loc 1 179 3 is_stmt 0 view .LVU267
 981 0024 2846     		mov	r0, r5
 982              	.LVL109:
 179:Core/Src/servo_iq18.c **** 				currentFeedback);
 983              		.loc 1 179 3 view .LVU268
 984 0026 FFF7FEFF 		bl	pid_iq18_calculate
 985              	.LVL110:
 181:Core/Src/servo_iq18.c **** 				&servo->pid_current) * servo->driver.maxDuty) >> 18);
 986              		.loc 1 181 3 is_stmt 1 view .LVU269
 181:Core/Src/servo_iq18.c **** 				&servo->pid_current) * servo->driver.maxDuty) >> 18);
 987              		.loc 1 181 40 is_stmt 0 view .LVU270
 988 002a 2846     		mov	r0, r5
 989 002c FFF7FEFF 		bl	pid_iq18_getOutput
 990              	.LVL111:
 181:Core/Src/servo_iq18.c **** 				&servo->pid_current) * servo->driver.maxDuty) >> 18);
 991              		.loc 1 181 30 discriminator 1 view .LVU271
 992 0030 C217     		asrs	r2, r0, #31
 182:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 993              		.loc 1 182 41 view .LVU272
 994 0032 B4F8F430 		ldrh	r3, [r4, #244]
 182:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 995              		.loc 1 182 26 view .LVU273
 996 0036 A0FB0301 		umull	r0, r1, r0, r3
 997 003a 03FB0211 		mla	r1, r3, r2, r1
 182:Core/Src/servo_iq18.c **** 		pwm_setSpeed(&servo->driver, duty);
 998              		.loc 1 182 51 view .LVU274
 999 003e 800C     		lsrs	r0, r0, #18
 1000              	.LVL112:
 183:Core/Src/servo_iq18.c **** 	} else {
 1001              		.loc 1 183 3 is_stmt 1 view .LVU275
 1002 0040 40EA8131 		orr	r1, r0, r1, lsl #14
 1003              	.LVL113:
 183:Core/Src/servo_iq18.c **** 	} else {
 1004              		.loc 1 183 3 is_stmt 0 view .LVU276
 1005 0044 04F1E400 		add	r0, r4, #228
 1006 0048 FFF7FEFF 		bl	pwm_setSpeed
 1007              	.LVL114:
 183:Core/Src/servo_iq18.c **** 	} else {
 1008              		.loc 1 183 3 view .LVU277
 1009              	.LBE5:
 1010 004c E4E7     		b	.L51
 1011              		.cfi_endproc
 1012              	.LFE77:
 1014              		.section	.text.servo_iq18_controlPosition,"ax",%progbits
 1015              		.align	1
 1016              		.global	servo_iq18_controlPosition
 1017              		.syntax unified
 1018              		.thumb
 1019              		.thumb_func
 1021              	servo_iq18_controlPosition:
 1022              	.LVL115:
 1023              	.LFB78:
 189:Core/Src/servo_iq18.c **** 
 190:Core/Src/servo_iq18.c **** void servo_iq18_controlPosition(servo_iq18_t *servo, _iq18 setpoint) {
 1024              		.loc 1 190 70 is_stmt 1 view -0
 1025              		.cfi_startproc
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 23


 1026              		@ args = 0, pretend = 0, frame = 0
 1027              		@ frame_needed = 0, uses_anonymous_args = 0
 1028              		@ link register save eliminated.
 191:Core/Src/servo_iq18.c **** 	servo->currentMode = Position;
 1029              		.loc 1 191 2 view .LVU279
 1030              		.loc 1 191 21 is_stmt 0 view .LVU280
 1031 0000 0123     		movs	r3, #1
 1032 0002 80F81531 		strb	r3, [r0, #277]
 192:Core/Src/servo_iq18.c **** 	servo->positionSetpoint = setpoint * servo->reverseFlag;
 1033              		.loc 1 192 2 is_stmt 1 view .LVU281
 1034              		.loc 1 192 44 is_stmt 0 view .LVU282
 1035 0006 90F91031 		ldrsb	r3, [r0, #272]
 1036              		.loc 1 192 37 view .LVU283
 1037 000a 01FB03F3 		mul	r3, r1, r3
 1038              		.loc 1 192 26 view .LVU284
 1039 000e C0F8FC30 		str	r3, [r0, #252]
 193:Core/Src/servo_iq18.c **** }
 1040              		.loc 1 193 1 view .LVU285
 1041 0012 7047     		bx	lr
 1042              		.cfi_endproc
 1043              	.LFE78:
 1045              		.section	.text.servo_iq18_controlVelocity,"ax",%progbits
 1046              		.align	1
 1047              		.global	servo_iq18_controlVelocity
 1048              		.syntax unified
 1049              		.thumb
 1050              		.thumb_func
 1052              	servo_iq18_controlVelocity:
 1053              	.LVL116:
 1054              	.LFB79:
 194:Core/Src/servo_iq18.c **** 
 195:Core/Src/servo_iq18.c **** void servo_iq18_controlVelocity(servo_iq18_t *servo, _iq18 setpoint) {
 1055              		.loc 1 195 70 is_stmt 1 view -0
 1056              		.cfi_startproc
 1057              		@ args = 0, pretend = 0, frame = 0
 1058              		@ frame_needed = 0, uses_anonymous_args = 0
 1059              		@ link register save eliminated.
 196:Core/Src/servo_iq18.c **** 	if (servo->controllerLoops != Single) {
 1060              		.loc 1 196 2 view .LVU287
 1061              		.loc 1 196 11 is_stmt 0 view .LVU288
 1062 0000 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1063              		.loc 1 196 5 view .LVU289
 1064 0004 83B1     		cbz	r3, .L57
 197:Core/Src/servo_iq18.c **** 		servo->currentMode = Velocity;
 1065              		.loc 1 197 3 is_stmt 1 view .LVU290
 1066              		.loc 1 197 22 is_stmt 0 view .LVU291
 1067 0006 0223     		movs	r3, #2
 1068 0008 80F81531 		strb	r3, [r0, #277]
 198:Core/Src/servo_iq18.c **** 		// _iq18 vel_setp_iq18 = (_iq18)setpoint_q9 << 9;
 199:Core/Src/servo_iq18.c **** 		servo->velocitySetpoint = _IQsat(setpoint * servo->reverseFlag,
 1069              		.loc 1 199 3 is_stmt 1 view .LVU292
 1070              		.loc 1 199 29 is_stmt 0 view .LVU293
 1071 000c 90F91021 		ldrsb	r2, [r0, #272]
 1072 0010 01FB02F2 		mul	r2, r1, r2
 1073 0014 D0F80831 		ldr	r3, [r0, #264]
 1074 0018 9A42     		cmp	r2, r3
 1075 001a 03DC     		bgt	.L59
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 24


 1076              		.loc 1 199 29 discriminator 2 view .LVU294
 1077 001c 5B42     		rsbs	r3, r3, #0
 1078 001e 9342     		cmp	r3, r2
 1079 0020 B8BF     		it	lt
 1080 0022 1346     		movlt	r3, r2
 1081              	.L59:
 1082              		.loc 1 199 27 discriminator 4 view .LVU295
 1083 0024 C0F80031 		str	r3, [r0, #256]
 1084              	.L57:
 200:Core/Src/servo_iq18.c **** 				servo->maxShaftSpeed, -servo->maxShaftSpeed);
 201:Core/Src/servo_iq18.c **** 	}
 202:Core/Src/servo_iq18.c **** }
 1085              		.loc 1 202 1 view .LVU296
 1086 0028 7047     		bx	lr
 1087              		.cfi_endproc
 1088              	.LFE79:
 1090              		.section	.text.servo_iq18_controlCurrent,"ax",%progbits
 1091              		.align	1
 1092              		.global	servo_iq18_controlCurrent
 1093              		.syntax unified
 1094              		.thumb
 1095              		.thumb_func
 1097              	servo_iq18_controlCurrent:
 1098              	.LVL117:
 1099              	.LFB80:
 203:Core/Src/servo_iq18.c **** 
 204:Core/Src/servo_iq18.c **** void servo_iq18_controlCurrent(servo_iq18_t *servo, _iq18 setpoint) {
 1100              		.loc 1 204 69 is_stmt 1 view -0
 1101              		.cfi_startproc
 1102              		@ args = 0, pretend = 0, frame = 0
 1103              		@ frame_needed = 0, uses_anonymous_args = 0
 1104              		@ link register save eliminated.
 205:Core/Src/servo_iq18.c **** 	if (servo->controllerLoops == Triple) {
 1105              		.loc 1 205 2 view .LVU298
 1106              		.loc 1 205 11 is_stmt 0 view .LVU299
 1107 0000 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1108              		.loc 1 205 5 view .LVU300
 1109 0004 022B     		cmp	r3, #2
 1110 0006 00D0     		beq	.L63
 1111              	.L60:
 206:Core/Src/servo_iq18.c **** 		servo->currentMode = Current;
 207:Core/Src/servo_iq18.c **** 		servo->currentSetpoint = _IQsat(setpoint * servo->reverseFlag,
 208:Core/Src/servo_iq18.c **** 				servo->maxCurrent, -servo->maxCurrent);
 209:Core/Src/servo_iq18.c **** 		// servo->currentSetpoint = _IQ18(setpoint);
 210:Core/Src/servo_iq18.c **** 	}
 211:Core/Src/servo_iq18.c **** }
 1112              		.loc 1 211 1 view .LVU301
 1113 0008 7047     		bx	lr
 1114              	.L63:
 206:Core/Src/servo_iq18.c **** 		servo->currentMode = Current;
 1115              		.loc 1 206 3 is_stmt 1 view .LVU302
 206:Core/Src/servo_iq18.c **** 		servo->currentMode = Current;
 1116              		.loc 1 206 22 is_stmt 0 view .LVU303
 1117 000a 0323     		movs	r3, #3
 1118 000c 80F81531 		strb	r3, [r0, #277]
 207:Core/Src/servo_iq18.c **** 				servo->maxCurrent, -servo->maxCurrent);
 1119              		.loc 1 207 3 is_stmt 1 view .LVU304
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 25


 207:Core/Src/servo_iq18.c **** 				servo->maxCurrent, -servo->maxCurrent);
 1120              		.loc 1 207 28 is_stmt 0 view .LVU305
 1121 0010 90F91021 		ldrsb	r2, [r0, #272]
 1122 0014 01FB02F2 		mul	r2, r1, r2
 1123 0018 D0F80C31 		ldr	r3, [r0, #268]
 1124 001c 9A42     		cmp	r2, r3
 1125 001e 03DC     		bgt	.L62
 207:Core/Src/servo_iq18.c **** 				servo->maxCurrent, -servo->maxCurrent);
 1126              		.loc 1 207 28 discriminator 2 view .LVU306
 1127 0020 5B42     		rsbs	r3, r3, #0
 1128 0022 9342     		cmp	r3, r2
 1129 0024 B8BF     		it	lt
 1130 0026 1346     		movlt	r3, r2
 1131              	.L62:
 207:Core/Src/servo_iq18.c **** 				servo->maxCurrent, -servo->maxCurrent);
 1132              		.loc 1 207 26 discriminator 4 view .LVU307
 1133 0028 C0F80431 		str	r3, [r0, #260]
 1134              		.loc 1 211 1 view .LVU308
 1135 002c ECE7     		b	.L60
 1136              		.cfi_endproc
 1137              	.LFE80:
 1139              		.section	.text.servo_iq18_reset,"ax",%progbits
 1140              		.align	1
 1141              		.global	servo_iq18_reset
 1142              		.syntax unified
 1143              		.thumb
 1144              		.thumb_func
 1146              	servo_iq18_reset:
 1147              	.LVL118:
 1148              	.LFB81:
 212:Core/Src/servo_iq18.c **** 
 213:Core/Src/servo_iq18.c **** void servo_iq18_reset(servo_iq18_t *servo){
 1149              		.loc 1 213 43 is_stmt 1 view -0
 1150              		.cfi_startproc
 1151              		@ args = 0, pretend = 0, frame = 0
 1152              		@ frame_needed = 0, uses_anonymous_args = 0
 1153              		.loc 1 213 43 is_stmt 0 view .LVU310
 1154 0000 10B5     		push	{r4, lr}
 1155              		.cfi_def_cfa_offset 8
 1156              		.cfi_offset 4, -8
 1157              		.cfi_offset 14, -4
 1158 0002 0446     		mov	r4, r0
 214:Core/Src/servo_iq18.c **** 	// encoder_reset_iq18(&servo->encoder);
 215:Core/Src/servo_iq18.c **** 	pid_iq18_reset(&servo->pid_current);
 1159              		.loc 1 215 2 is_stmt 1 view .LVU311
 1160 0004 A830     		adds	r0, r0, #168
 1161              	.LVL119:
 1162              		.loc 1 215 2 is_stmt 0 view .LVU312
 1163 0006 FFF7FEFF 		bl	pid_iq18_reset
 1164              	.LVL120:
 216:Core/Src/servo_iq18.c **** 	pid_iq18_reset(&servo->pid_velocity);
 1165              		.loc 1 216 2 is_stmt 1 view .LVU313
 1166 000a 04F16C00 		add	r0, r4, #108
 1167 000e FFF7FEFF 		bl	pid_iq18_reset
 1168              	.LVL121:
 217:Core/Src/servo_iq18.c **** 	pid_iq18_reset(&servo->pid_position);
 1169              		.loc 1 217 2 view .LVU314
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 26


 1170 0012 04F13000 		add	r0, r4, #48
 1171 0016 FFF7FEFF 		bl	pid_iq18_reset
 1172              	.LVL122:
 218:Core/Src/servo_iq18.c **** }...
 1173              		.loc 1 218 1 is_stmt 0 view .LVU315
 1174 001a 10BD     		pop	{r4, pc}
 1175              		.loc 1 218 1 view .LVU316
 1176              		.cfi_endproc
 1177              	.LFE81:
 1179              		.text
 1180              	.Letext0:
 1181              		.file 2 "C:/Users/zhmis/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 1182              		.file 3 "C:/Users/zhmis/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 1183              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1184              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1185              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1186              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 1187              		.file 8 "Core/Inc/IQmathLib.h"
 1188              		.file 9 "Core/Inc/ema_iq18.h"
 1189              		.file 10 "Core/Inc/encoder_iq18.h"
 1190              		.file 11 "Core/Inc/pid_iq18.h"
 1191              		.file 12 "Core/Inc/pwm.h"
 1192              		.file 13 "Core/Inc/servo_iq18.h"
ARM GAS  C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s 			page 27


DEFINED SYMBOLS
                            *ABS*:00000000 servo_iq18.c
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:22     .text.servo_iq18_base_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:28     .text.servo_iq18_base_init:00000000 servo_iq18_base_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:114    .text.servo_iq18_encoder_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:120    .text.servo_iq18_encoder_init:00000000 servo_iq18_encoder_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:175    .text.servo_iq18_encoder_init:00000028 $d
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:180    .text.servo_iq18_driver_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:186    .text.servo_iq18_driver_init:00000000 servo_iq18_driver_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:263    .text.servo_iq18_driver_init:00000060 $d
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:268    .text.servo_iq18_position_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:274    .text.servo_iq18_position_init:00000000 servo_iq18_position_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:353    .text.servo_iq18_velocity_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:359    .text.servo_iq18_velocity_init:00000000 servo_iq18_velocity_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:443    .text.servo_iq18_current_init:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:449    .text.servo_iq18_current_init:00000000 servo_iq18_current_init
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:565    .text.servo_iq18_setPositionTolerance:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:571    .text.servo_iq18_setPositionTolerance:00000000 servo_iq18_setPositionTolerance
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:605    .text.servo_iq18_getState:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:611    .text.servo_iq18_getState:00000000 servo_iq18_getState
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:634    .text.servo_iq18_getDirection:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:640    .text.servo_iq18_getDirection:00000000 servo_iq18_getDirection
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:684    .text.servo_iq18_getCurrentDirection:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:690    .text.servo_iq18_getCurrentDirection:00000000 servo_iq18_getCurrentDirection
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:708    .text.servo_iq18_positionLoop:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:714    .text.servo_iq18_positionLoop:00000000 servo_iq18_positionLoop
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:808    .text.servo_iq18_velocityLoop:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:814    .text.servo_iq18_velocityLoop:00000000 servo_iq18_velocityLoop
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:932    .text.servo_iq18_currentLoop:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:938    .text.servo_iq18_currentLoop:00000000 servo_iq18_currentLoop
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1015   .text.servo_iq18_controlPosition:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1021   .text.servo_iq18_controlPosition:00000000 servo_iq18_controlPosition
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1046   .text.servo_iq18_controlVelocity:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1052   .text.servo_iq18_controlVelocity:00000000 servo_iq18_controlVelocity
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1091   .text.servo_iq18_controlCurrent:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1097   .text.servo_iq18_controlCurrent:00000000 servo_iq18_controlCurrent
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1140   .text.servo_iq18_reset:00000000 $t
C:\Users\zhmis\AppData\Local\Temp\ccjRptpb.s:1146   .text.servo_iq18_reset:00000000 servo_iq18_reset

UNDEFINED SYMBOLS
__aeabi_fmul
__aeabi_f2iz
__aeabi_fdiv
initEMA_iq18
pid_iq18_reset
encoder_getAngle_iq18
pid_iq18_calculate
pid_iq18_getOutput
pwm_setSpeed
encoder_getVelocity_iq18
